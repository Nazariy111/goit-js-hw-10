{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\n\niziToast.settings({\n    timeout: 3000, // default timeout\n    resetOnHover: true,\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    position: 'topCenter', \n    color: 'red',\n    });\n\nconst btn = document.querySelector(\"button\");\nconst days = document.querySelector(\"[data-days]\");\nconst hours = document.querySelector(\"[data-hours]\");\nconst minutes = document.querySelector(\"[data-minutes]\");\nconst seconds = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        console.log(selectedDates[0]);\n        userSelectedDate = selectedDates[0];\n\n        const nowDate = Date.now();\n\n        if (userSelectedDate <= nowDate) {\n            // window.alert(\"Please choose a date in the future\");\n            iziToast.error({\n                title: 'Error',\n                message: 'Please choose a date in the future',\n            });\n            btn.classList.remove(\"isActive\");\n            btn.removeEventListener(\"click\", timerFunction);\n        } else { \n            btn.classList.add(\"isActive\");\n            btn.addEventListener(\"click\", timerFunction);\n        };\n    },\n};\n\nflatpickr(\"#datetime-picker\", options);\n\nfunction timerFunction() {\n    btn.classList.remove(\"isActive\");\n    setInterval(() => {\n        const nowDate = Date.now();\n        const ms = userSelectedDate - nowDate;\n        if (ms >= 0) { \n            const timeObj = convertMs(ms);\n            if (timeObj.days < 10) { \n                days.textContent = addLeadingZero(timeObj.days);\n            } else {\n                days.textContent = timeObj.days;\n            };\n            hours.textContent = addLeadingZero(timeObj.hours);\n            minutes.textContent = addLeadingZero(timeObj.minutes);\n            seconds.textContent = addLeadingZero(timeObj.seconds);\n        };\n\n        \n\n    }, 1000);\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n    const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n    const days = Math.floor(ms / day);\n  // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n};\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, \"0\");\n};\n\n"],"names":["iziToast","btn","days","hours","minutes","seconds","userSelectedDate","options","selectedDates","nowDate","timerFunction","flatpickr","ms","timeObj","convertMs","addLeadingZero","value"],"mappings":"0IAKAA,EAAS,SAAS,CACd,QAAS,IACT,aAAc,GACd,aAAc,UACd,cAAe,WACf,SAAU,YACV,MAAO,KACX,CAAK,EAEL,MAAMC,EAAM,SAAS,cAAc,QAAQ,EACrCC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvD,IAAIC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,QAAQ,IAAIA,EAAc,EAAE,EAC5BF,EAAmBE,EAAc,GAEjC,MAAMC,EAAU,KAAK,MAEjBH,GAAoBG,GAEpBT,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACzB,CAAa,EACDC,EAAI,UAAU,OAAO,UAAU,EAC/BA,EAAI,oBAAoB,QAASS,CAAa,IAE9CT,EAAI,UAAU,IAAI,UAAU,EAC5BA,EAAI,iBAAiB,QAASS,CAAa,EAElD,CACL,EAEAC,EAAU,mBAAoBJ,CAAO,EAErC,SAASG,GAAgB,CACrBT,EAAI,UAAU,OAAO,UAAU,EAC/B,YAAY,IAAM,CACd,MAAMQ,EAAU,KAAK,MACfG,EAAKN,EAAmBG,EAC9B,GAAIG,GAAM,EAAG,CACT,MAAMC,EAAUC,EAAUF,CAAE,EACxBC,EAAQ,KAAO,GACfX,EAAK,YAAca,EAAeF,EAAQ,IAAI,EAE9CX,EAAK,YAAcW,EAAQ,KAE/BV,EAAM,YAAcY,EAAeF,EAAQ,KAAK,EAChDT,EAAQ,YAAcW,EAAeF,EAAQ,OAAO,EACpDR,EAAQ,YAAcU,EAAeF,EAAQ,OAAO,CAEhE,CAGK,EAAE,GAAI,CACX,CAEA,SAASC,EAAUF,EAAI,CAQnB,MAAMV,EAAO,KAAK,MAAMU,EAAK,KAAG,EAE1BT,EAAQ,KAAK,MAAOS,EAAK,MAAO,IAAI,EAEpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EAEjDP,EAAU,KAAK,MAASO,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASU,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C"}